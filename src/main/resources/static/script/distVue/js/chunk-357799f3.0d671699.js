(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-357799f3"],{"0d63":function(e,t,r){},2017:function(e,t,r){"use strict";var s=r("cafe"),o=r.n(s);o.a},7545:function(e,t,r){"use strict";var s=r("0d63"),o=r.n(s);o.a},9123:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("d3b7");var s=r("9179");function o(e){var t="endUser/sendCode";return new Promise((function(r,o){s["a"].post(t,{},{},e||{}).then((function(e){r(e)})).catch((function(e){o(e),new Error(e)}))}))}},"9ed6":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-container"},[r("div",{staticClass:"out-login-web"},[r("div",{staticClass:"fix"},[0===e.domType?[r("h2",{staticClass:"title"},[e._v("登录")]),r("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{ref:"username",attrs:{placeholder:"手机号、邮箱",name:"username",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username","string"===typeof t?t.trim():t)},expression:"loginForm.username"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"登录密码",name:"password",tabindex:"2","auto-complete":"on"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password","string"===typeof t?t.trim():t)},expression:"loginForm.password"}}),r("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[r("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1)],1),r("div",{staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.loginAjax(t)}}},[e._v("登录")])],1)]:e._e(),1===e.domType?[r("h2",{staticClass:"title"},[e._v("注册")]),r("el-form",{ref:"registered",staticClass:"login-form",attrs:{model:e.registeredForm,rules:e.registeredRules,"auto-complete":"on","label-position":"left"}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{ref:"username",attrs:{placeholder:"手机号、邮箱",name:"username",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.registeredForm.username,callback:function(t){e.$set(e.registeredForm,"username","string"===typeof t?t.trim():t)},expression:"registeredForm.username"}})],1),1===e.domType||2===e.domType||3===e.domType?r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{ref:"username",staticStyle:{width:"63%"},attrs:{placeholder:"请输入验证码",name:"code",type:"number","auto-complete":"on"},model:{value:e.registeredForm.code,callback:function(t){e.$set(e.registeredForm,"code","string"===typeof t?t.trim():t)},expression:"registeredForm.code"}}),r("el-button",{staticStyle:{width:"140px","margin-left":"10px"},attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.sendCodeAjax("registeredForm")}}},[e._v("获取验证码"),r("span",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"count"},[e._v("("+e._s(e.count)+"s)")])])],1):e._e(),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"登录密码",name:"password",tabindex:"2","auto-complete":"on"},model:{value:e.registeredForm.password,callback:function(t){e.$set(e.registeredForm,"password","string"===typeof t?t.trim():t)},expression:"registeredForm.password"}}),r("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[r("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),r("el-form-item",{attrs:{prop:"repeatPassword"}},[r("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"重复登录密码",name:"password",tabindex:"2","auto-complete":"on"},model:{value:e.registeredForm.repeatPassword,callback:function(t){e.$set(e.registeredForm,"repeatPassword","string"===typeof t?t.trim():t)},expression:"registeredForm.repeatPassword"}}),r("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[r("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1)],1),r("div",{staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.registerAjax("register","registeredForm")}}},[e._v("注册")])],1)]:e._e(),2===e.domType?[r("h2",{staticClass:"title"},[e._v("忘记密码")]),r("el-form",{ref:"registered",staticClass:"login-form",attrs:{model:e.registeredForm,rules:e.registeredRules,"auto-complete":"on","label-position":"left"}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{ref:"username",attrs:{placeholder:"手机号、邮箱",name:"username",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.registeredForm.username,callback:function(t){e.$set(e.registeredForm,"username","string"===typeof t?t.trim():t)},expression:"registeredForm.username"}})],1),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{ref:"username",staticStyle:{width:"63%"},attrs:{placeholder:"请输入验证码",name:"code",type:"number","auto-complete":"on"},model:{value:e.registeredForm.code,callback:function(t){e.$set(e.registeredForm,"code","string"===typeof t?t.trim():t)},expression:"registeredForm.code"}}),r("el-button",{staticStyle:{width:"140px","margin-left":"10px"},attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.sendCodeAjax("registeredForm")}}},[e._v("获取验证码"),r("span",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"count"},[e._v("("+e._s(e.count)+"s)")])])],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"登录密码",name:"password",tabindex:"2","auto-complete":"on"},model:{value:e.registeredForm.password,callback:function(t){e.$set(e.registeredForm,"password","string"===typeof t?t.trim():t)},expression:"registeredForm.password"}}),r("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[r("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),r("el-form-item",{attrs:{prop:"repeatPassword"}},[r("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"重复登录密码",name:"password",tabindex:"2","auto-complete":"on"},model:{value:e.registeredForm.repeatPassword,callback:function(t){e.$set(e.registeredForm,"repeatPassword","string"===typeof t?t.trim():t)},expression:"registeredForm.repeatPassword"}}),r("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[r("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1)],1),r("div",{staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.registerAjax("forget","registeredForm")}}},[e._v("提交")])],1)]:e._e(),3===e.domType?[r("h2",{staticClass:"title"},[e._v("验证码登录")]),r("el-form",{ref:"captcha",staticClass:"login-form",attrs:{model:e.captchaForm,rules:e.captchaRules,"auto-complete":"on","label-position":"left"}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{ref:"username",attrs:{placeholder:"手机号、邮箱",name:"username",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.captchaForm.username,callback:function(t){e.$set(e.captchaForm,"username","string"===typeof t?t.trim():t)},expression:"captchaForm.username"}})],1),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{ref:"username",staticStyle:{width:"63%"},attrs:{placeholder:"请输入验证码",name:"code",type:"number","auto-complete":"on"},model:{value:e.captchaForm.code,callback:function(t){e.$set(e.captchaForm,"code","string"===typeof t?t.trim():t)},expression:"captchaForm.code"}}),r("el-button",{staticStyle:{width:"140px","margin-left":"10px"},attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.sendCodeAjax("captchaForm")}}},[e._v("获取验证码"),r("span",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"count"},[e._v("("+e._s(e.count)+"s)")])])],1)],1),r("div",{staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.captchaLoginAjax(t)}}},[e._v("登录")])],1)]:e._e(),r("div",{staticClass:"switch-dot"},[0!==e.domType?r("el-link",{on:{click:function(t){e.domType=0}}},[e._v("密码登录")]):e._e(),3!==e.domType?r("el-link",{on:{click:function(t){e.domType=3}}},[e._v("验证码登录")]):e._e(),1!==e.domType?r("el-link",{on:{click:function(t){e.domType=1}}},[e._v("注册")]):e._e(),2!==e.domType?r("el-link",{on:{click:function(t){e.domType=2}}},[e._v("忘记密码？")]):e._e()],1)],2),e._m(0)])])},o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fix"},[r("div")])}],a=r("61f7"),n=r("9123"),i=60,c={name:"Login",data:function(){var e=this,t=function(e,t,r){Object(a["b"])(t)?r():r(new Error("请输入手机号或者邮箱"))},r=function(e,t,r){0===t.length?r(new Error("请输入密码")):r()},s=function(t,r,s){""===r?s(new Error("请再次输入密码")):r!==e.registeredForm.password?s(new Error("两次输入密码不一致!")):s()};return{loginForm:{username:"",password:""},loginRules:{username:[{required:!0,trigger:["blur","change"],validator:t}],password:[{required:!0,trigger:["blur","change"],validator:r}]},registeredForm:{username:"",password:"",repeatPassword:"",code:"",id:""},registeredRules:{username:[{required:!0,trigger:["blur","change"],validator:t}],code:[{required:!0,trigger:["blur","change"],message:"请输入验证码"}],password:[{required:!0,trigger:["blur","change"],validator:r}],repeatPassword:[{required:!0,trigger:["blur","change"],validator:s}]},captchaForm:{username:"",code:"",id:""},captchaRules:{username:[{required:!0,trigger:["blur","change"],validator:t}],code:[{required:!0,trigger:["blur","change"],message:"请输入验证码"}]},loading:!1,passwordType:"password",redirect:void 0,loginType:0,show:!0,count:"",timer:null,domType:0}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{styleLoginName:function(e){return this.loginTs[e]},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},sendCodeAjax:function(e){var t=this;Object(a["b"])(this[e].username)&&(this.timer||(this.count=i,this.show=!1,this.timer=setInterval((function(){t.count>0&&t.count<=i?t.count--:(t.show=!0,clearInterval(t.timer),t.timer=null)}),1e3),Object(n["a"])({account:this[e].username,type:1}).then((function(r){200===r.code&&(t[e].id=r.id)}))))},registerAjax:function(e,t){var r=this;this.$refs.registered.validate((function(s){if(!s)return r.loading=!1,!1;r.$store.dispatch("user/".concat(e),r[t]).then((function(){r.$router.push({path:r.redirect||"/"}),r.loading=!1})).catch((function(){r.loading=!1}))}))},loginAjax:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0,e.$store.dispatch("user/login",e.loginForm).then((function(){e.$router.push({path:e.redirect||"/"}),e.loading=!1})).catch((function(){e.loading=!1}))}))},captchaLoginAjax:function(){var e=this;this.$refs.captcha.validate((function(t){if(!t)return e.loading=!1,!1;e.$store.dispatch("user/slogin",e.captchaForm).then((function(){e.$router.push({path:e.redirect||"/"}),e.loading=!1})).catch((function(){e.loading=!1}))}))}}},l=c,p=l,d=(r("2017"),r("7545"),r("2877")),u=Object(d["a"])(p,s,o,!1,null,"58f5396a",null);t["default"]=u.exports},cafe:function(e,t,r){}}]);