(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b384726"],{"4a37":function(t,e,a){"use strict";var n=a("878c"),i=a.n(n);i.a},"878c":function(t,e,a){},"8a4f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"annex"},[a("div",{staticStyle:{"text-align":"right","padding-bottom":"10px"}},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0,t.batchName=""}}},[t._v("上传")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.listData,"header-cell-style":{background:"#d4d9e2",color:"#606266"},border:"",height:"100%"}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"序号",index:t.indexMethod,fixed:"left",width:"80"}}),a("el-table-column",{attrs:{prop:"batchName",label:"实验名称",width:"400","header-align":"center",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"fileName",label:"文件名称","header-align":"center",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"createDate",label:"创建时间",width:"160 ","header-align":"center",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",{attrs:{size:"mini"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.copyText(e.row)}}},[t._v("复制链接")]),e.row.locking?t._e():a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.removeFile(e.row)}}},[t._v("删除")])],1)]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"center","margin-top":"12px"},attrs:{"current-page":t.pageNo+1,"page-size":10,"page-sizes":t.pageSizes,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.sizeChange,"current-change":t.currentChange}}),a("div",{staticStyle:{display:"none"}},[a("input",{ref:"typeInputUpload",attrs:{type:"file",accept:".zip,application/zip,image/*,video/*,audio/*"},on:{change:t.uploadFile}})]),a("el-dialog",{attrs:{title:"上传",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("请输入实验名称"),a("div",{staticStyle:{"margin-top":"10px"}}),a("el-input",{model:{value:t.batchName,callback:function(e){t.batchName="string"===typeof e?e.trim():e},expression:"batchName"}})],1),a("el-button",{staticStyle:{margin:"10px 10px 0 0"},attrs:{type:"primary"},on:{click:t.update}},[t._v("选择文件")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")])],1)],1)],1)},i=[],o=a("5530"),l=(a("d3b7"),a("9179"));function c(t){var e="/cloudDisk/save";return new Promise((function(a,n){l["a"].uploadFile(e,{"Content-Type":"application/x-www-form-urlencoded"},t).then((function(t){a(t)})).catch((function(t){n(t),new Error(t)}))}))}var r=a("4328"),s=a.n(r);function u(t){var e="/cloudDisk/getListByPage?item=".concat((new Date).getTime());return new Promise((function(a,n){l["a"].post(e,{},{"Content-Type":"application/x-www-form-urlencoded"},s.a.stringify(t)||{}).then((function(t){a(t)})).catch((function(t){n(t),new Error(t)}))}))}function p(t){var e="/cloudDisk/remove?item=".concat((new Date).getTime());return new Promise((function(a,n){l["a"].post(e,{},{"Content-Type":"application/x-www-form-urlencoded"},s.a.stringify(t)||{}).then((function(t){a(t)})).catch((function(t){n(t),new Error(t)}))}))}a("c302");var g={name:"annex",data:function(){return{listData:[],loading:!1,pageNo:0,pageSize:20,pageSizes:[20,30,40],totalCount:0,dialogVisible:!1,batchName:"",loadingPut:null}},created:function(){this.getData()},methods:{copyText:function(t){var e=this,a="/".concat(t.fileUrl);this.$copyText(a).then((function(t){e.$message.success("复制成功")})).catch((function(t){e.$message.error("复制失败")}))},removeFile:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){p(Object(o["a"])({},t)).then((function(t){e.getData(),200===t.code&&e.$message({type:"success",message:t.data})}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},update:function(){this.$refs.typeInputUpload.click()},uploadFile:function(t){var e=this,a=new FormData;a.append("file",t.target.files[0]),a.append("type",1),a.append("batchName",this.batchName),this.loadingPut=this.$loading({lock:!0,text:"文件上传中",background:"rgba(0, 0, 0, 0.7)"}),c(a).then((function(t){e.dialogVisible=!1,e.loadingPut.close(),200!==t.code&&e.$message.error(t.desc),e.getData()}))},indexMethod:function(t){var e=0;return e=this.totalPage?this.pageSize*this.totalPage+t+1:t+1,e},sizeChange:function(t){this.totalPage=0,this.pageSize=t,this.loading=!0},currentChange:function(t){this.totalPage=t-1,this.loading=!0},getData:function(){var t=this;this.loading=!0,u({pageNo:this.pageNo,pageSize:this.pageSize}).then((function(e){t.loading=!1,200===e.code&&(t.listData=e.data,t.totalCount=e.page.totalCount)}))}}},d=g,h=d,f=(a("4a37"),a("2877")),m=Object(f["a"])(h,n,i,!1,null,"7b469c08",null);e["default"]=m.exports},c302:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var n="".concat(window.location.origin,"/upload/")}}]);